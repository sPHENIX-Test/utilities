pipeline {

    agent none

        stages { 
            stage('Example') 
            {
        agent any
            
                steps {
                        timestamps {
                   				 echo 'Example - Entry'
                   				 echo 'Example - Done'
                        }
                }
            }
                   
            stage('SCM Checkout')
            {
        agent any
                steps 
                {
                        timestamps {
                        
                   				 echo 'SCM Checkout - Entry'
                        
                            dir('coresoftware') {
                                git url: 'https://github.com/sPHENIX-Test/coresoftware.git'
                            }
                            dir('macros') {
                                git url: 'https://github.com/sPHENIX-Test/macros.git'
                            }

                            sh('ls')
                            sh('pwd')
                            
                            
                   				 echo 'SCM Checkout - Done'
                        }
                }
             }
             
             
        stage('Build')
        {
            parallel {
            
	            stage('cppcheck')
	            {
	        				agent any
	       
	                steps 
	                {
                        timestamps {
                   				 echo 'cppcheck - Entry'
                   				 
                            dir('cppcheck') {
                            		
                            		sh('ln -svfb ../coresoftware ./');
                            		sh('ln -svfb ../cppcheck.sh ./');
							
		                            sh('ls')
		                            sh('pwd')
									
																sh('cppcheck.sh');
                            }

                   				 echo 'cppcheck - Done'
                        }
	                }
	        		}
	    		}
    		}
             
        }
        
        
}
